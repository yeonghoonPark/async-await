"use strict";

/**
 * Synchronous: 'ë™ì‹œì— ì¼ì–´ë‚˜ëŠ”'
 * - ë™ê¸°ëŠ” ìš”ì²­ê³¼ ê²°ê³¼ê°€ ë™ì‹œì— ì¼ì–´ë‚œë‹¤.
 *   - ë™ê¸°í•¨ìˆ˜ì˜ ê²½ìš°, ìš”ì²­ì„ ë°›ìŒê³¼ ë™ì‹œì— ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•´ì•¼ì§€ë§Œ ë‹¤ìŒ ìž‘ì—…ì˜ ìš”ì²­ì„ ë°›ê³  ì§„í–‰í•  ìˆ˜ ìžˆë‹¤.
 *
 * Asynchronous: 'ë™ì‹œì— ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”'
 * - ë¹„ë™ê¸°ëŠ” ìš”ì²­ê³¼ ê²°ê³¼ê°€ ë™ì‹œì— ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
 *   - ë¹„ë™ê¸°í•¨ìˆ˜ì˜ ê²½ìš°, ìš”ì²­ì„ ë°›ì€ í›„ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šê³ ë„ ë‹¤ìŒ ìž‘ì—…ì˜ ìš”ì²­ì„ ë°›ê³  ì§„í–‰í•  ìˆ˜ ìžˆë‹¤.
 *   - browserê°€ ì œê³µí•˜ëŠ” API(ex: setTimeout())ì˜ ê²½ìš° ëŒ€ë¶€ë¶„ ë¹„ë™ê¸°ë¡œ ë§Œë“¤ì–´ì ¸ ìžˆë‹¤.
 */

// Synchronousì˜ ê²½ìš°, ìž‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ìœ„ì—ì„œ ì•„ëž˜ë¡œ ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ë‹¤ìŒ ìž‘ì—…ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤.
console.log("ì¼ë²ˆ");
console.log("ì´ë²ˆ");
console.log("ì‚¼ë²ˆ");
console.log("ì‚¬ë²ˆ");

// Asynchronousì˜ ê²½ìš°, ìž‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ìœ„ì—ì„œ ì•„ëž˜ë¡œ ì§„í–‰í•˜ì§€ë§Œ ìš”ì²­ì„ ë°›ê³  ê²°ê³¼ë¥¼ setTimeoutì´ëž€ ë¹„ë™ê¸°í•¨ìˆ˜ë¡œ delay timeì„ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì— ê²°ê³¼ë¥¼ ì„¤ì •í•œ delay timeì— ì²˜ë¦¬í•œë‹¤.
setTimeout(() => console.log("1ë²ˆ"), 7000);
setTimeout(() => console.log("2ë²ˆ"), 5000);
setTimeout(() => console.log("3ë²ˆ"), 3000);
console.log("4ë²ˆ");
// - ìž¥ì : ê²°ê³¼ë¥¼ ë°”ë¡œ ì£¼ì§€ ì•Šê³ ë„ ë‹¤ìŒ ìž‘ì—…ì— ëŒ€í•œ ìš”ì²­ì„ ë°›ê³  ë‹¤ìŒ ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ëŠ” ê²ƒì„ ì§„í–‰í•  ìˆ˜ ìžˆê¸°ì— ì†ë„ê°€ ë™ê¸°ì‹ì— ë¹„í•´ ë¹ ë¥´ë‹¤.
//        (ìœ„ì˜ setTimeoutì˜ˆì‹œì˜ ê²½ìš°, ë§Œì•½ ë¹„ë™ê¸°í•¨ìˆ˜ì¸ setTimeout ì•„ë‹ˆë¼ ë™ê¸°í•¨ìˆ˜ì˜€ë‹¤ë©´ ìˆœì°¨ì ìœ¼ë¡œ 7ì´ˆ, 5ì´ˆ ,3ì´ˆ í›„ì— 4ë²ˆì§¸ ìž‘ì—…ì„ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— 4ë²ˆì§¸ ìž‘ì—…ê¹Œì§€ ë„ë‹¬í•˜ëŠ” ì´ ì†Œìš”ì‹œê°„ì€ 15ì´ˆê°€ ë˜ê² ì§€ë§Œ ë¹„ë™ê¸°í•¨ìˆ˜ì˜ ê²½ìš°, ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì£¼ì§€ ì•Šê³ ë„ ë‹¤ìŒ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ì´ ì†Œìš”ì‹œê°„ì€ 7ì´ˆì´ë‹¤.)
// - ë‹¨ì : ë§Œì•½ ìž„ì˜ì ìœ¼ë¡œ ë¹„ë™ê¸°ì‹ì¸ setTimeoutìœ¼ë¡œ delay timeì„ ì„¤ì •í•  ìˆ˜ ì—†ëŠ” ë™ê¸°ì‹ í•¨ìˆ˜ì˜ ê²½ìš°ì—ì„œ 1ë²ˆì˜ ê²°ê³¼ê°’ì´ ë‚˜ì™€ì•¼ 2ë²ˆì„ ì‹¤í–‰í•  ìˆ˜ ìžˆê³  2ë²ˆì˜ ê²°ê³¼ê°’ì´ ë‚˜ì™€ì•¼ 3ë²ˆì„ ì‹¤í–‰í•  ìˆ˜ ìžˆê³  3ë²ˆì˜ ê²°ê³¼ê°’ì´ ë‚˜ì™€ì•¼ 4ë²ˆì„ ì‹¤í–‰ í•  ìˆ˜ ìžˆëŠ” ìƒí™©ì´ë¼ë©´..?
//        ê·¸ ìƒí™©ì—ì„œ 1ë²ˆì§¸ í•¨ìˆ˜ì˜ ìž‘ì—…ëŸ‰ì„ 100ê°œë¼ê³  ê°€ì •í•˜ê³  2,3,4ë²ˆì§¸ ìž‘ì—…ëŸ‰ì„ 1ê°œë¼ê³  ê°€ì •í•œë‹¤ë©´ ë¹„ë™ê¸°ì‹ì˜ íŠ¹ì„±ìƒ ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ì§€ ì•Šê³  ë‹¤ìŒ ìž‘ì—…ì— ëŒ€í•œ ìš”ì²­ì„ ë°›ê¸° ë•Œë¬¸ì— 1ë²ˆì§¸ í•¨ìˆ˜ê°€ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ëŠ” ë™ì•ˆ 2,3,4ë²ˆì§¸ë„ ìš”ì²­ì„ ë°›ê³  ê²°ê³¼ë¥¼ ë” ë¹ ë¥´ê²Œ ë„ì¶œí•˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
//        ðŸŽº. í•´ê²°ì±…
//        *   1. ë¹„ë™ê¸°ì  callbackí•¨ìˆ˜ ì‚¬ìš©
//        *   2. ES6, then(), catch()
//        *   3. ES8, async await

// 1. ë¹„ë™ê¸°ì  callbackí•¨ìˆ˜
const printWithDelay = (print, time) => {
  setTimeout(print, time);
};
printWithDelay(console.log("Two seconds have passed"), 2000);
// ë‹¨ì , ì½œë°±ì§€ì˜¥ì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.

// 2. Promise ê°ì²´, .then().catch() = .ê·¸ë¦¬ê³ ë‚˜ì„œ().ìž¡ë‹¤()
// ë¹„ë™ê¸°ì  ìž‘ì—…ì„ í•˜ëŠ” í•¨ìˆ˜ì˜ ë¦¬í„´íƒ€ìž…, ë‹¤ë§Œ ìµœì¢… ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³ , ë¯¸ëž˜ì˜ ì–´ë–¤ ì‹œì ì— ê²°ê³¼ë¥¼ ì œê³µí•˜ê² ë‹¤ëŠ” 'ì•½ì†'ì„ ë°˜í™˜í•œë‹¤.
//  ðŸ“Œ. Promiseì˜ 3ê°€ì§€ ìƒíƒœ(ë‹¤ìŒ ì¤‘ 1ê°€ì§€ì˜ ìƒíƒœë¥¼ ê°€ì§„ë‹¤.)
//  *   1. pending(ëŒ€ê¸°): fulfilled(ì´í–‰)ë„ rejected(ê±°ë¶€)ë„ í•˜ì§€ ì•Šì€ ìƒíƒœ
//  *   2. fulfilled(ì´í–‰): ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ ì‘ë‹µ ë°›ì€ ìƒíƒœ
//  *   3. rejected(ê±°ë¶€): ìš”ì²­ì´ ì‹¤íŒ¨í•˜ì—¬ ì‘ë‹µ ë°›ëŠ”ë°ì— ì‹¤íŒ¨í•œ ìƒíƒœ
// then(): Promiseë¥¼ ë¦¬í„´í•˜ê³  2ê°œì˜ callbackí•¨ìˆ˜ë¥¼ parameterë¡œ ì„ ì–¸í•  ìˆ˜ ìžˆë‹¤.
// ì²«ë²ˆì§¸ parameter: Promiseì˜ ìƒíƒœê°€ fulfilled(ì´í–‰)í–ˆì„ ë•Œì˜ callbackí•¨ìˆ˜
// ë‘ë²ˆì§¸ parameter: Promiseê°€ ìƒíƒœê°€ rejected(ê±°ë¶€)í–ˆì„ ë•Œì˜ callbackí•¨ìˆ˜
// ë‹¨ì , then() ì½œë°±ì§€ì˜¥ì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.

// 3. Async Await, ë¹„ë™ê¸°ì ì¸, ê¸°ë‹¤ë¦¬ë‹¤
// asyncë¥¼ ì´ìš©í•œ í•¨ìˆ˜ì„ ì–¸ì€ ë¹„ë™ê¸°í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë©° Promiseë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤, í•˜ì§€ë§Œ ì½”ë“œì˜ êµ¬ë¬¸ê³¼ êµ¬ì¡°ëŠ” ë™ê¸°í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ì—¬ ê°€ë…ì„±ì´ ì¢‹ë‹¤.

// ðŸ“Œ. .then().catch()ì™€ async-awaitì°¨ì´ì 
//     * ì—ëŸ¬ í•¸ë“¤ë§
//       - Promise ì‚¬ìš©ì‹œ, .catch()ë¬¸ í†µí•´ ì—ëŸ¬ í•¸ë“¤ë§ ê°€ëŠ¥
//       - async await ì‚¬ìš©ì‹œ, try-catch()ë¬¸ì„ í†µí•´ ì—ëŸ¬ í•¸ë“¤ë§ ê°€ëŠ¥

// ðŸ“Œ. .then().catch()ë³´ë‹¤ await asyncê°€ ê°€ì§€ëŠ” ìž¥ì 
//     * ì½”ë“œ ê°€ë…ì„± ë° ë™ê¸°ì‹í™”
//       - .then().catch()ì˜ ê²½ìš° .then().then()...catch().catch()...ì˜ ì²´ì´ë‹ í˜•ì‹ìœ¼ë¡œ ì¸í•œ ê°€ë…ì„±ì €í•˜
//       - async-awaitì˜ ê²½ìš° .then().cathc()ì— ë¹„í•´ ì‰½ê²Œ ë¹„ë™ê¸°í•¨ìˆ˜ë¥¼ ë™ê¸°í•¨ìˆ˜ì²˜ëŸ¼ ì‚¬ìš© í•  ìˆ˜ ìžˆìœ¼ë©° ê°€ë…ì„±ì´ ì¢‹ë‹¤.

// REST-API url about coin
const COIN_URL = "https://api.coinpaprika.com/v1/tickers";

const getCoinsDataWithApi = () => axios.get(COIN_URL);

// .then().catch() ë°©ì‹
const getCoinsByThenCatchMethod = () => {
  console.log("Promise", 1);
  getCoinsDataWithApi()
    .then(
      // resolve
      (response) => console.log(response),
      // reject
      (error) => {
        console.error(error, "ì—ëŸ¬");
      },
    )
    .then(() => console.log("Promise", 2))
    .then(() => console.log("Promise", 3));
  // .catch((error) => console.error(error, "ì—ëŸ¬"));
};
getCoinsByThenCatchMethod();

// async await ë°©ì‹
const getCoinsByAsyncAwaitMethod = async () => {
  try {
    console.log("async-await", 1);
    console.log(await getCoinsDataWithApi());
    console.log("async-await", 2);
    console.log("async-await", 3);
  } catch (error) {
    console.log(error);
  }
};
getCoinsByAsyncAwaitMethod();
